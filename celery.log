/var/www/agentarbitrage/venv/lib/python3.10/site-packages/celery/platforms.py:829: SecurityWarning: You're running the worker with superuser privileges: this is
absolutely not recommended!

Please specify a different user using the --uid option.

User information: uid=0 euid=0 gid=0 egid=0

  warnings.warn(SecurityWarning(ROOT_DISCOURAGED.format(
Loading celery_config.py
celery_config.py loaded successfully
 
 -------------- celery@srv934846 v5.3.6 (emerald-rush)
--- ***** ----- 
-- ******* ---- Linux-5.15.0-151-generic-x86_64-with-glibc2.35 2025-10-12 12:42:39
- *** --- * --- 
- ** ---------- [config]
- ** ---------- .> app:         agentarbitrage:0x7f7607c2d600
- ** ---------- .> transport:   redis://127.0.0.1:6379/0
- ** ---------- .> results:     redis://127.0.0.1:6379/0
- *** --- * --- .> concurrency: 1 (prefork)
-- ******* ---- .> task events: OFF (enable -E to monitor tasks in this worker)
--- ***** ----- 
 -------------- [queues]
                .> celery           exchange=celery(direct) key=celery
                

[tasks]
  . keepa_deals.Keepa_Deals.recalculate_deals
  . keepa_deals.Keepa_Deals.run_keepa_script

[2025-10-12 12:42:39,684: WARNING/MainProcess] /var/www/agentarbitrage/venv/lib/python3.10/site-packages/celery/worker/consumer/consumer.py:507: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2025-10-12 12:42:39,693: INFO/MainProcess] Connected to redis://127.0.0.1:6379/0
[2025-10-12 12:42:39,694: WARNING/MainProcess] /var/www/agentarbitrage/venv/lib/python3.10/site-packages/celery/worker/consumer/consumer.py:507: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2025-10-12 12:42:39,696: INFO/MainProcess] mingle: searching for neighbors
[2025-10-12 12:42:40,701: INFO/MainProcess] mingle: all alone
[2025-10-12 12:42:40,709: INFO/MainProcess] celery@srv934846 ready.
[2025-10-12 12:42:50,890: ERROR/MainProcess] Received unregistered task of type 'keepa_deals.tasks.update_recent_deals'.
The message has been ignored and discarded.

Did you remember to import the module containing this task?
Or maybe you're using relative imports?

Please see
https://docs.celeryq.dev/en/latest/internals/protocol.html
for more information.

The full contents of the message body was:
b'[[], {}, {"callbacks": null, "errbacks": null, "chain": null, "chord": null}]' (77b)

The full contents of the message headers:
{'lang': 'py', 'task': 'keepa_deals.tasks.update_recent_deals', 'id': '983d7c77-eb99-4c99-b71b-c23bd1e3f1c1', 'shadow': None, 'eta': None, 'expires': None, 'group': None, 'group_index': None, 'retries': 0, 'timelimit': [None, None], 'root_id': '983d7c77-eb99-4c99-b71b-c23bd1e3f1c1', 'parent_id': None, 'argsrepr': '()', 'kwargsrepr': '{}', 'origin': 'gen396742@srv934846', 'ignore_result': False, 'replaced_task_nesting': 0, 'stamped_headers': None, 'stamps': {}}

The delivery info for this task is:
{'exchange': '', 'routing_key': 'celery'}
Traceback (most recent call last):
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/celery/worker/consumer/consumer.py", line 658, in on_task_received
    strategy = strategies[type_]
KeyError: 'keepa_deals.tasks.update_recent_deals'
[2025-10-12 13:26:49,695: WARNING/MainProcess] consumer: Connection to broker lost. Trying to re-establish the connection...
Traceback (most recent call last):
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/celery/worker/consumer/consumer.py", line 340, in start
    blueprint.start(self)
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/celery/bootsteps.py", line 116, in start
    step.start(parent)
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/celery/worker/consumer/consumer.py", line 742, in start
    c.loop(*c.loop_args())
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/celery/worker/loops.py", line 97, in asynloop
    next(loop)
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/kombu/asynchronous/hub.py", line 373, in create_loop
    cb(*cbargs)
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/kombu/transport/redis.py", line 1359, in on_readable
    self.cycle.on_readable(fileno)
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/kombu/transport/redis.py", line 576, in on_readable
    chan.handlers[type]()
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/kombu/transport/redis.py", line 925, in _receive
    ret.append(self._receive_one(c))
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/kombu/transport/redis.py", line 935, in _receive_one
    response = c.parse_response()
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/redis/client.py", line 1500, in parse_response
    response = self._execute(conn, conn.read_response)
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/redis/client.py", line 1482, in _execute
    return conn.retry.call_with_retry(
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/redis/retry.py", line 49, in call_with_retry
    fail(error)
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/redis/client.py", line 1484, in <lambda>
    lambda error: self._disconnect_raise_connect(conn, error),
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/redis/client.py", line 1471, in _disconnect_raise_connect
    raise error
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/redis/retry.py", line 46, in call_with_retry
    return do()
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/redis/client.py", line 1483, in <lambda>
    lambda: command(*args, **kwargs),
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/redis/connection.py", line 824, in read_response
    response = self._parser.read_response(disable_decoding=disable_decoding)
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/redis/connection.py", line 318, in read_response
    raw = self._buffer.readline()
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/redis/connection.py", line 249, in readline
    self._read_from_socket()
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/redis/connection.py", line 195, in _read_from_socket
    raise ConnectionError(SERVER_CLOSED_CONNECTION_ERROR)
redis.exceptions.ConnectionError: Connection closed by server.
[2025-10-12 13:26:49,702: WARNING/MainProcess] /var/www/agentarbitrage/venv/lib/python3.10/site-packages/celery/worker/consumer/consumer.py:391: CPendingDeprecationWarning: 
In Celery 5.1 we introduced an optional breaking change which
on connection loss cancels all currently executed tasks with late acknowledgement enabled.
These tasks cannot be acknowledged as the connection is gone, and the tasks are automatically redelivered
back to the queue. You can enable this behavior using the worker_cancel_long_running_tasks_on_connection_loss
setting. In Celery 5.1 it is set to False by default. The setting will be set to True by default in Celery 6.0.

  warnings.warn(CANCEL_TASKS_BY_DEFAULT, CPendingDeprecationWarning)

[2025-10-12 13:26:49,704: WARNING/MainProcess] /var/www/agentarbitrage/venv/lib/python3.10/site-packages/celery/worker/consumer/consumer.py:507: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2025-10-12 13:26:49,705: ERROR/MainProcess] consumer: Cannot connect to redis://127.0.0.1:6379/0: Error 111 connecting to 127.0.0.1:6379. Connection refused..
Trying again in 2.00 seconds... (1/100)


worker: Warm shutdown (MainProcess)
Loading celery_config.py
celery_config.py loaded successfully
 
 -------------- celery@srv934846 v5.3.6 (emerald-rush)
--- ***** ----- 
-- ******* ---- Linux-5.15.0-151-generic-x86_64-with-glibc2.35 2025-10-12 13:27:30
- *** --- * --- 
- ** ---------- [config]
- ** ---------- .> app:         agentarbitrage:0x7fd68ee8f250
- ** ---------- .> transport:   redis://127.0.0.1:6379/0
- ** ---------- .> results:     redis://127.0.0.1:6379/0
- *** --- * --- .> concurrency: 1 (prefork)
-- ******* ---- .> task events: OFF (enable -E to monitor tasks in this worker)
--- ***** ----- 
 -------------- [queues]
                .> celery           exchange=celery(direct) key=celery
                

[tasks]
  . keepa_deals.Keepa_Deals.recalculate_deals
  . keepa_deals.Keepa_Deals.run_keepa_script

[2025-10-12 13:27:30,878: INFO/Beat] beat: Starting...
[2025-10-12 13:27:30,928: INFO/Beat] Scheduler: Sending due task update-recent-deals-every-15-minutes (keepa_deals.tasks.update_recent_deals)
[2025-10-12 13:27:30,979: WARNING/MainProcess] /var/www/agentarbitrage/venv/lib/python3.10/site-packages/celery/worker/consumer/consumer.py:507: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2025-10-12 13:27:30,988: INFO/MainProcess] Connected to redis://127.0.0.1:6379/0
[2025-10-12 13:27:30,989: WARNING/MainProcess] /var/www/agentarbitrage/venv/lib/python3.10/site-packages/celery/worker/consumer/consumer.py:507: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2025-10-12 13:27:30,990: INFO/MainProcess] mingle: searching for neighbors
[2025-10-12 13:27:31,997: INFO/MainProcess] mingle: all alone
[2025-10-12 13:27:32,023: INFO/MainProcess] celery@srv934846 ready.
[2025-10-12 13:27:32,027: ERROR/MainProcess] Received unregistered task of type 'keepa_deals.tasks.update_recent_deals'.
The message has been ignored and discarded.

Did you remember to import the module containing this task?
Or maybe you're using relative imports?

Please see
https://docs.celeryq.dev/en/latest/internals/protocol.html
for more information.

The full contents of the message body was:
b'[[], {}, {"callbacks": null, "errbacks": null, "chain": null, "chord": null}]' (77b)

The full contents of the message headers:
{'lang': 'py', 'task': 'keepa_deals.tasks.update_recent_deals', 'id': 'bbd0d0e6-7df5-4138-b0be-fcb50ce431ed', 'shadow': None, 'eta': None, 'expires': None, 'group': None, 'group_index': None, 'retries': 0, 'timelimit': [None, None], 'root_id': 'bbd0d0e6-7df5-4138-b0be-fcb50ce431ed', 'parent_id': None, 'argsrepr': '()', 'kwargsrepr': '{}', 'origin': 'gen396993@srv934846', 'ignore_result': False, 'replaced_task_nesting': 0, 'stamped_headers': None, 'stamps': {}}

The delivery info for this task is:
{'exchange': '', 'routing_key': 'celery'}
Traceback (most recent call last):
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/celery/worker/consumer/consumer.py", line 658, in on_task_received
    strategy = strategies[type_]
KeyError: 'keepa_deals.tasks.update_recent_deals'
[2025-10-12 13:27:39,330: ERROR/MainProcess] Received unregistered task of type 'keepa_deals.tasks.update_recent_deals'.
The message has been ignored and discarded.

Did you remember to import the module containing this task?
Or maybe you're using relative imports?

Please see
https://docs.celeryq.dev/en/latest/internals/protocol.html
for more information.

The full contents of the message body was:
b'[[], {}, {"callbacks": null, "errbacks": null, "chain": null, "chord": null}]' (77b)

The full contents of the message headers:
{'lang': 'py', 'task': 'keepa_deals.tasks.update_recent_deals', 'id': 'bea29174-bcdd-4815-b1f3-4318164ac536', 'shadow': None, 'eta': None, 'expires': None, 'group': None, 'group_index': None, 'retries': 0, 'timelimit': [None, None], 'root_id': 'bea29174-bcdd-4815-b1f3-4318164ac536', 'parent_id': None, 'argsrepr': '()', 'kwargsrepr': '{}', 'origin': 'gen396995@srv934846', 'ignore_result': False, 'replaced_task_nesting': 0, 'stamped_headers': None, 'stamps': {}}

The delivery info for this task is:
{'exchange': '', 'routing_key': 'celery'}
Traceback (most recent call last):
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/celery/worker/consumer/consumer.py", line 658, in on_task_received
    strategy = strategies[type_]
KeyError: 'keepa_deals.tasks.update_recent_deals'
[2025-10-12 13:30:00,090: INFO/Beat] Scheduler: Sending due task update-recent-deals-every-15-minutes (keepa_deals.tasks.update_recent_deals)
[2025-10-12 13:30:00,092: ERROR/MainProcess] Received unregistered task of type 'keepa_deals.tasks.update_recent_deals'.
The message has been ignored and discarded.

Did you remember to import the module containing this task?
Or maybe you're using relative imports?

Please see
https://docs.celeryq.dev/en/latest/internals/protocol.html
for more information.

The full contents of the message body was:
b'[[], {}, {"callbacks": null, "errbacks": null, "chain": null, "chord": null}]' (77b)

The full contents of the message headers:
{'lang': 'py', 'task': 'keepa_deals.tasks.update_recent_deals', 'id': 'b2be1bda-a5fc-41a9-8cf0-dee97400e416', 'shadow': None, 'eta': None, 'expires': None, 'group': None, 'group_index': None, 'retries': 0, 'timelimit': [None, None], 'root_id': 'b2be1bda-a5fc-41a9-8cf0-dee97400e416', 'parent_id': None, 'argsrepr': '()', 'kwargsrepr': '{}', 'origin': 'gen396993@srv934846', 'ignore_result': False, 'replaced_task_nesting': 0, 'stamped_headers': None, 'stamps': {}}

The delivery info for this task is:
{'exchange': '', 'routing_key': 'celery'}
Traceback (most recent call last):
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/celery/worker/consumer/consumer.py", line 658, in on_task_received
    strategy = strategies[type_]
KeyError: 'keepa_deals.tasks.update_recent_deals'
[2025-10-12 13:45:00,085: INFO/Beat] Scheduler: Sending due task update-recent-deals-every-15-minutes (keepa_deals.tasks.update_recent_deals)
[2025-10-12 13:45:00,088: ERROR/MainProcess] Received unregistered task of type 'keepa_deals.tasks.update_recent_deals'.
The message has been ignored and discarded.

Did you remember to import the module containing this task?
Or maybe you're using relative imports?

Please see
https://docs.celeryq.dev/en/latest/internals/protocol.html
for more information.

The full contents of the message body was:
b'[[], {}, {"callbacks": null, "errbacks": null, "chain": null, "chord": null}]' (77b)

The full contents of the message headers:
{'lang': 'py', 'task': 'keepa_deals.tasks.update_recent_deals', 'id': '2e433c19-41cc-4076-863b-ae3e4175c844', 'shadow': None, 'eta': None, 'expires': None, 'group': None, 'group_index': None, 'retries': 0, 'timelimit': [None, None], 'root_id': '2e433c19-41cc-4076-863b-ae3e4175c844', 'parent_id': None, 'argsrepr': '()', 'kwargsrepr': '{}', 'origin': 'gen396993@srv934846', 'ignore_result': False, 'replaced_task_nesting': 0, 'stamped_headers': None, 'stamps': {}}

The delivery info for this task is:
{'exchange': '', 'routing_key': 'celery'}
Traceback (most recent call last):
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/celery/worker/consumer/consumer.py", line 658, in on_task_received
    strategy = strategies[type_]
KeyError: 'keepa_deals.tasks.update_recent_deals'
[2025-10-12 14:00:00,071: INFO/Beat] Scheduler: Sending due task update-recent-deals-every-15-minutes (keepa_deals.tasks.update_recent_deals)
[2025-10-12 14:00:00,073: ERROR/MainProcess] Received unregistered task of type 'keepa_deals.tasks.update_recent_deals'.
The message has been ignored and discarded.

Did you remember to import the module containing this task?
Or maybe you're using relative imports?

Please see
https://docs.celeryq.dev/en/latest/internals/protocol.html
for more information.

The full contents of the message body was:
b'[[], {}, {"callbacks": null, "errbacks": null, "chain": null, "chord": null}]' (77b)

The full contents of the message headers:
{'lang': 'py', 'task': 'keepa_deals.tasks.update_recent_deals', 'id': '55dde0ad-6b17-42b2-b42d-15979dc51a4f', 'shadow': None, 'eta': None, 'expires': None, 'group': None, 'group_index': None, 'retries': 0, 'timelimit': [None, None], 'root_id': '55dde0ad-6b17-42b2-b42d-15979dc51a4f', 'parent_id': None, 'argsrepr': '()', 'kwargsrepr': '{}', 'origin': 'gen396993@srv934846', 'ignore_result': False, 'replaced_task_nesting': 0, 'stamped_headers': None, 'stamps': {}}

The delivery info for this task is:
{'exchange': '', 'routing_key': 'celery'}
Traceback (most recent call last):
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/celery/worker/consumer/consumer.py", line 658, in on_task_received
    strategy = strategies[type_]
KeyError: 'keepa_deals.tasks.update_recent_deals'
[2025-10-12 14:15:00,085: INFO/Beat] Scheduler: Sending due task update-recent-deals-every-15-minutes (keepa_deals.tasks.update_recent_deals)
[2025-10-12 14:15:00,087: ERROR/MainProcess] Received unregistered task of type 'keepa_deals.tasks.update_recent_deals'.
The message has been ignored and discarded.

Did you remember to import the module containing this task?
Or maybe you're using relative imports?

Please see
https://docs.celeryq.dev/en/latest/internals/protocol.html
for more information.

The full contents of the message body was:
b'[[], {}, {"callbacks": null, "errbacks": null, "chain": null, "chord": null}]' (77b)

The full contents of the message headers:
{'lang': 'py', 'task': 'keepa_deals.tasks.update_recent_deals', 'id': '30b6ea88-6e28-42d9-9d0b-b411d81a479f', 'shadow': None, 'eta': None, 'expires': None, 'group': None, 'group_index': None, 'retries': 0, 'timelimit': [None, None], 'root_id': '30b6ea88-6e28-42d9-9d0b-b411d81a479f', 'parent_id': None, 'argsrepr': '()', 'kwargsrepr': '{}', 'origin': 'gen396993@srv934846', 'ignore_result': False, 'replaced_task_nesting': 0, 'stamped_headers': None, 'stamps': {}}

The delivery info for this task is:
{'exchange': '', 'routing_key': 'celery'}
Traceback (most recent call last):
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/celery/worker/consumer/consumer.py", line 658, in on_task_received
    strategy = strategies[type_]
KeyError: 'keepa_deals.tasks.update_recent_deals'
[2025-10-12 14:30:00,087: INFO/Beat] Scheduler: Sending due task update-recent-deals-every-15-minutes (keepa_deals.tasks.update_recent_deals)
[2025-10-12 14:30:00,091: ERROR/MainProcess] Received unregistered task of type 'keepa_deals.tasks.update_recent_deals'.
The message has been ignored and discarded.

Did you remember to import the module containing this task?
Or maybe you're using relative imports?

Please see
https://docs.celeryq.dev/en/latest/internals/protocol.html
for more information.

The full contents of the message body was:
b'[[], {}, {"callbacks": null, "errbacks": null, "chain": null, "chord": null}]' (77b)

The full contents of the message headers:
{'lang': 'py', 'task': 'keepa_deals.tasks.update_recent_deals', 'id': '6e67bc20-3478-4166-a055-f5b2e9613b09', 'shadow': None, 'eta': None, 'expires': None, 'group': None, 'group_index': None, 'retries': 0, 'timelimit': [None, None], 'root_id': '6e67bc20-3478-4166-a055-f5b2e9613b09', 'parent_id': None, 'argsrepr': '()', 'kwargsrepr': '{}', 'origin': 'gen396993@srv934846', 'ignore_result': False, 'replaced_task_nesting': 0, 'stamped_headers': None, 'stamps': {}}

The delivery info for this task is:
{'exchange': '', 'routing_key': 'celery'}
Traceback (most recent call last):
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/celery/worker/consumer/consumer.py", line 658, in on_task_received
    strategy = strategies[type_]
KeyError: 'keepa_deals.tasks.update_recent_deals'
[2025-10-12 14:45:00,036: INFO/Beat] Scheduler: Sending due task update-recent-deals-every-15-minutes (keepa_deals.tasks.update_recent_deals)
[2025-10-12 14:45:00,039: ERROR/MainProcess] Received unregistered task of type 'keepa_deals.tasks.update_recent_deals'.
The message has been ignored and discarded.

Did you remember to import the module containing this task?
Or maybe you're using relative imports?

Please see
https://docs.celeryq.dev/en/latest/internals/protocol.html
for more information.

The full contents of the message body was:
b'[[], {}, {"callbacks": null, "errbacks": null, "chain": null, "chord": null}]' (77b)

The full contents of the message headers:
{'lang': 'py', 'task': 'keepa_deals.tasks.update_recent_deals', 'id': 'a01f6707-33b8-4a58-ab5c-24306d6e2184', 'shadow': None, 'eta': None, 'expires': None, 'group': None, 'group_index': None, 'retries': 0, 'timelimit': [None, None], 'root_id': 'a01f6707-33b8-4a58-ab5c-24306d6e2184', 'parent_id': None, 'argsrepr': '()', 'kwargsrepr': '{}', 'origin': 'gen396993@srv934846', 'ignore_result': False, 'replaced_task_nesting': 0, 'stamped_headers': None, 'stamps': {}}

The delivery info for this task is:
{'exchange': '', 'routing_key': 'celery'}
Traceback (most recent call last):
  File "/var/www/agentarbitrage/venv/lib/python3.10/site-packages/celery/worker/consumer/consumer.py", line 658, in on_task_received
    strategy = strategies[type_]
KeyError: 'keepa_deals.tasks.update_recent_deals'
