/* Global Styles */
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Open+Sans:wght@400;600;700&display=swap');

:root {
    --filter-panel-height: 102px; /* Default open state */
    --filter-panel-z: 200;
}

body {
  margin: 0;
  min-height: 100vh;
  /* Using width instead of min-width to avoid overflow issues with some viewport sizes */
  width: 100vw;
  display: flex;
  flex-direction: column;
  justify-content: flex-start; /* Aligns content to the top */
  align-items: center;
  font-family: 'DM Sans', sans-serif;
  color: #ffffff;
  overflow-x: hidden; /* Prevent horizontal scrollbar from gradient animation */
  position: relative; /* Needed for z-indexing context */
  letter-spacing: -0.02em;
  background-color: #003852; /* Default background for pages without gradient */
}

/* Animated Gradient Background - apply to body */
body.gradient-background {
  background: linear-gradient(295deg,#001028,#003852,#012b50);
/*   background: linear-gradient(295deg,#001028,#003852,#012b50);  */
  background-size: 180% 180%;
  animation: gradient-animation 20s ease infinite;
}

@keyframes gradient-animation {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* New Site Background Gradient (matches Background.png) */
body.site-background {
  background: #13161a;


  min-height: 100vh;
}

/* Home page specific background image */
body.home-background::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('/static/AIGIRL.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    opacity: 0.10;
    z-index: -1; /* Place it behind the content */
}


/* Make sure content is above the background image pseudo-element */
.container, h1, .login-container {
    z-index: 2;
}

/* Vexel-inspired styles */
.container {
  width: 80%; /* Adjusted from 90% to match guided_learning/results */
  max-width: 900px; /* Adjusted to match results */
  padding: 40px;
  background: rgba(0, 0, 0, 0.1);
  border-radius: 15px;
  margin: 20px auto;
}

.container-full-width {
    width: calc(100% - 20px);
    margin: 20px 10px;
    padding: 40px;
    background: rgba(0, 0, 0, 0.1);
    border-radius: 15px;
    box-sizing: border-box;
}

.light-theme {
    background-color: #fff;
    color: #333;
}

.light-theme h1, .light-theme h2, .light-theme h3, .light-theme p {
    color: #333;
}

.light-theme a {
    color: #007bff;
}

h1, h2, h3 {
  color: #ffffff;
  text-align: center;
  font-weight: 400;
  margin-bottom: 20px;
  letter-spacing: 0.01em;
}

button, .button, input[type="submit"] {
  background-color: transparent;
  color: white;
  border: 1px solid white;
  padding: 12px 24px;
  font-size: 1.1em;
  border-radius: 8px;
  cursor: pointer;
  transition: background-color 0.3s ease;
  text-decoration: none; /* For <a> tags styled as buttons */
  display: inline-block; /* For <a> tags */
}

button:hover:not(:disabled), .button:hover, input[type="submit"]:hover {
  background-color: rgba(255, 255, 255, 0.1);
}

/* Styles from guided_learning.html & results.html */
textarea {
    width: 100%;
    box-sizing: border-box; /* Include padding and border in the element's total width and height */
    margin-bottom: 20px;
    padding: 10px;
    font-size: 1em;
    background-color: rgba(0, 0, 0, 0.2);
    color: white;
    border: 1px solid rgba(102, 153, 204, 0.5);
    border-radius: 5px;
    min-height: 250px;
    resize: vertical;
}

/* Dark-transparent treatment for tables/results */
.result-section {
    margin-bottom: 20px;
    background: rgba(0, 0, 0, 0.2);
    padding: 20px;
    border-radius: 10px;
    border: 1px solid rgba(255, 255, 255, 0.2);
}

h2 {
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    padding-bottom: 5px;
}

.content {
    background-color: transparent;
    padding: 15px;
    border-radius: 5px;
    white-space: pre-wrap;
    word-wrap: break-word;
    max-height: 250px;
    overflow-y: auto;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

a {
    color: #ffffff;
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}


/* Login form styles from index.html */
.login-container {
    position: absolute;
    top: 50px;
    right: 50px;
    display: flex;
    align-items: center;
}

.login-button {
    padding: 10px 20px;
    font-size: 1.2em;
}

.login-form {
    display: none;
    margin-right: 10px;
}

.login-form input[type="text"], .login-form input[type="password"] {
    padding: 10px;
    font-size: 1em;
    margin-right: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background-color: rgba(255, 255, 255, 0.9);
}

.show-form .login-button {
    display: none;
}

.show-form .login-form {
    display: flex;
}

/* Custom Tooltip */
.custom-tooltip {
    position: absolute;
    display: none;
    background-color: #336699;
    color: white;
    padding: 8px 12px;
    border-radius: 6px;
    border: 1px solid #003366;
    z-index: 1000;
    pointer-events: none;
    font-size: 0.9em;
    white-space: nowrap; /* Prevent title from wrapping */
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
}

/* Flash Messages */
.flashes {
    list-style-type: none;
    padding: 0;
    margin: 0 0 20px 0;
}
.flash {
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 5px;
}
.flash.success {
    background-color: rgba(0, 255, 0, 0.1);
    border: 1px solid rgba(0, 255, 0, 0.2);
    color: white;
}
.flash.warning {
    background-color: rgba(255, 255, 0, 0.1);
    border: 1px solid rgba(255, 255, 0, 0.2);
    color: white;
}
.flash.error {
    background-color: rgba(255, 0, 0, 0.1);
    border: 1px solid rgba(255, 0, 0, 0.2);
    color: white;
}

/* Status Message Box */
.status-message {
    background-color: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white;
    padding: 15px;
    border-radius: 5px;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/* Spinner/Progress */
.progress-container {
    display: none;
    text-align: center;
    margin: 0 10px;
}
.spinner {
    border: 4px solid #f3f3f3;
    border-top: 4px solid #3498db;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    animation: spin 1s linear infinite;
    margin: auto;
}
.spinner-inline {
    border: 2px solid #f3f3f3;
    border-top: 2px solid #3498db;
    border-radius: 50%;
    width: 15px;
    height: 15px;
    animation: spin 1s linear infinite;
    display: none;
    margin: 0;
    vertical-align: middle;
}
.spinner-small {
    border: 2px solid #f3f3f3;
    border-top: 2px solid #3498db;
    border-radius: 50%;
    width: 12px;
    height: 12px;
    animation: spin 1s linear infinite;
    display: inline-block;
    margin-left: 5px;
    vertical-align: middle;
}
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Special Buttons */
button.clear-session {
    border-color: #CC6666;
}
button.clear-session:hover:not(:disabled) {
    background-color: rgba(255, 0, 0, 0.1);
    border-color: #ff4d4d;
}
button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Responsive Styles */
@media (max-width: 600px) {
    body {
        justify-content: flex-start; /* Align content to the top on small screens */
        padding-top: 5vh;
    }
    #agent-arbitrage-h1 {
        font-size: 10vw;
        max-width: 90vw;
        padding: 10px;
    }
    .login-container {
        top: 10px;
        right: 10px;
        flex-direction: column;
        gap: 10px;
        position: static; /* Let it flow with the content */
        margin-top: 20px;
    }
    .login-button, .login-form button {
        width: 200px;
    }
    .login-form {
        margin-right: 0;
        flex-direction: column;
        gap: 10px;
    }
    .login-form input {
        width: 200px;
        font-size: 0.9em;
        margin-right: 0;
    }
    .container {
        width: 95%;
        padding: 20px;
    }
}

/* --- New Header Styles (Flexbox) --- */
.main-header {
    position: sticky;
    top: 0;
    width: 100%;
    /* The padding sets the height and pushes down the .container */
    height: 134px;
    box-sizing: border-box;
    z-index: 300;
    background-color: #131d39; /* Updated Color */
    /* Flex logic moved to wrapper */
}

.header-content-wrapper {
    max-width: 1550px;
    margin: 0 auto;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 17px; /* Padding for when window < 1550px */
    box-sizing: border-box;
}

/* Nav Sections */
.nav-section {
    position: static;
    transform: none;
    display: flex;
    align-items: center;
    z-index: 10;
    height: 100%;
}

.nav-left {
    flex: 1;
    justify-content: flex-start;
}

.nav-center {
    flex: 0 1 auto;
    justify-content: center;
    white-space: nowrap;
}

.nav-right {
    flex: 1;
    justify-content: flex-end;
}

/* Nav Items */
.nav-item {
    display: flex;
    align-items: center;
    font-family: 'Open Sans', sans-serif;
    font-size: 16px;
    font-weight: 400; /* Regular */
    color: #eef2f6;
    text-decoration: none;
    opacity: 0.5; /* Default transparency */
    transition: opacity 0.2s ease;
}

.nav-item.active,
.nav-item:hover {
    opacity: 1.0; /* Full opaqueness */
    text-decoration: none;
    color: #eef2f6;
}

.nav-link {
    font-family: 'Open Sans', sans-serif;
    font-size: 16px;
    font-weight: 400; /* Regular */
    color: #eef2f6;
    text-decoration: none;
    opacity: 0.5;
    transition: opacity 0.2s ease;
    padding: 0 5px; /* Spacing around text links? */
}

.nav-link.active,
.nav-link:hover {
    opacity: 1.0;
    text-decoration: none;
    color: #eef2f6;
}

/* Icons */
.nav-icon {
    height: 20px;
    width: auto;
    margin-right: 8px; /* Spacing between icon and label */
    display: block;
}

/* Spacers */
.nav-spacer-large {
    width: 37px;
}

.nav-spacer {
    width: 20px;
}

.nav-divider {
    color: #eef2f6;
    opacity: 0.5;
    margin: 0 5px;
}

/* Mentor Overlay / Chat Window */
.mentor-chat-window {
    display: none;
    position: fixed;
    bottom: 20px; /* Anchored to bottom */
    right: 20px; /* Anchored to right */
    width: 505px; /* Spec: 505px */
    height: 540px; /* Updated Height: 540px */
    background-color: #566e9e; /* Header BG from mocks */
    border-radius: 18px 0 18px 18px; /* Spec: Squared Top-Right */
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    z-index: 1000;
    border: none;
    box-sizing: border-box;
    cursor: default;
    flex-direction: column;
    /* overflow: hidden; Removed to allow pointer to protrude */
}

/* Pointer Arrow - Removed per 'Remove the point' request */
/* .mentor-chat-window::before { ... } */

.mentor-window-header {
    background-color: #566e9e; /* Match main BG */
    padding: 0; /* Flush for avatar */
    position: relative;
    flex-shrink: 0;
    height: 186px; /* Spec Height */
    box-sizing: border-box;
    display: flex;
    flex-direction: row; /* Row layout for Avatar + Info */
    align-items: flex-start;
    border-radius: 18px 0 0 0; /* Round top-left corner only */
}

.mentor-profile-section {
    display: flex;
    align-items: flex-end; /* Align items to bottom */
    gap: 0; /* No gap, padding handled in info block */
    height: 100%;
    width: 100%;
}

.mentor-big-avatar {
    width: 124px;
    height: 186px; /* Full Height */
    object-fit: cover;
    border-radius: 18px 0 0 0; /* Spec: 18px Top-Left Only */
}

.mentor-info-block {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    padding: 17px 44px 0 17px; /* Updated: Removed bottom padding */
    height: 100%;
    box-sizing: border-box;
}

.mentor-intro {
    font-family: 'Open Sans', sans-serif;
    font-size: 14px; /* Spec: 14px */
    font-weight: 600; /* SemiBold */
    line-height: 1.4;
    color: #11233e; /* Spec: #11233e */
    margin: 0 0 15px 0;
}

.mentor-selection-area {
    margin-top: auto;
    padding-right: 0; /* Updated: Removed padding */
    margin-right: -24px; /* Pull right to align 20px from edge (44px parent - 24px = 20px) */
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: flex-end;
    gap: 10px; /* Space between label and icons */
}

.choose-label {
    display: inline-block;
    font-family: 'Open Sans', sans-serif;
    font-size: 14px; /* Spec: 14px */
    font-weight: 600; /* SemiBold */
    color: #b7c9e2; /* Spec: #b7c9e2 */
    margin-bottom: 0;
    text-align: right; /* Align right per padding spec */
    white-space: nowrap; /* Prevent line break */
}

.mentor-choice-row {
    display: flex;
    justify-content: flex-end; /* Align right */
    gap: 5px; /* Spec: 5px */
}

.mentor-choice-tiny {
    width: 49px; /* Spec: 49px */
    height: 43px; /* Spec: 43px */
    cursor: pointer;
    transition: transform 0.2s;
    border: none; /* Updated: Removed border */
    border-radius: 4px; /* Slight rounding for rectangular images */
    outline: none; /* Ensure no outline */
}

.mentor-choice-tiny:hover {
    transform: scale(1.1);
}

.chat-messages-area {
    flex: 1;
    background-color: #ffffff; /* White chat background */
    overflow-y: auto;
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.chat-message {
    display: flex;
    align-items: flex-start;
    gap: 14px; /* Updated: 14px gap */
    max-width: 95%; /* Increased width */
}

.mentor-message {
    align-self: flex-start; /* Left aligned */
    padding-right: 40px; /* Spec: 40px padding from right edge */
}

.user-message {
    align-self: flex-end; /* Right aligned */
    /* flex-direction: row-reverse; Removed to fix Avatar position */
    padding-left: 40px; /* Spec: 40px padding from left edge */
    box-sizing: border-box;
}

.chat-avatar {
    width: 77px; /* Spec: 77px for Small */
    height: 77px;
    border-radius: 50%;
    flex-shrink: 0;
}

.chat-bubble {
    padding: 12px 16px;
    font-family: 'Open Sans', sans-serif;
    font-size: 14px; /* Spec: 14px */
    font-weight: 400; /* Updated: Regular */
    line-height: 1.4;
    position: relative;
    border: none; /* Updated: Removed Border */
    box-shadow: 0 2px 4px rgba(0,0,0,0.1); /* Spec: Subtle Shadow */
    width: 360px; /* Spec: Max width 360px */
    margin-top: 12px; /* Updated: Icon 12px above chat box */
}

/* Mentor Bubble Specifics */
.mentor-message .chat-bubble {
    background-color: #d4dfee; /* Updated: #d4dfee */
    border-radius: 0 16px 16px 16px; /* Updated: Squared Top-Left */
    color: #11233e; /* Updated: #11233e */
}

/* User Bubble Specifics */
.user-message .chat-bubble {
    background-color: #a4bbdd; /* Updated: #a4bbdd */
    border-radius: 16px 0 16px 16px; /* Updated: Squared Top-Right */
    color: #11233e; /* Updated: #11233e */
}

.chat-input-area {
    background-color: #ffffff; /* Match Input BG or Area */
    padding: 20px 20px 20px 20px; /* Explicit padding */
    display: flex;
    align-items: flex-end; /* Align bottom */
    gap: 10px;
    flex-shrink: 0;
    border-top: none;
    border-radius: 0 0 18px 18px; /* Round bottom corners since overflow is visible */
}

#chat-input-field {
    flex: 1;
    border: 1px solid #678dc6; /* Spec: Border */
    border-radius: 0 0 15px 15px; /* Spec: Squared Top, Radius Bottom */
    padding: 10px 15px;
    font-family: 'Open Sans', sans-serif;
    font-size: 14px;
    color: #3e577d;
    resize: none;
    height: 95px; /* Updated: 95px */
    min-height: 95px; /* Override global textarea min-height */
    outline: none;
    background-color: #ffffff; /* Spec: Fill White */
    box-sizing: border-box; /* Ensure padding doesn't increase height */
    margin-bottom: 0; /* Remove default textarea margin */
}

/* Placeholder Text Color */
#chat-input-field::placeholder {
    color: #617283; /* Spec: #617283 */
}

.chat-submit-btn {
    width: 40px; /* Spec: 40px */
    height: 40px;
    cursor: pointer;
    transition: transform 0.1s;
    margin-bottom: 30px; /* Adjust alignment with tall text area */
    /* margin-right: 10px; Removed to flush with edge */
}

.chat-submit-btn:active {
    transform: scale(0.95);
}

/* Typing Animation */
.italic-pulse {
    font-style: italic;
    color: #3e577d; /* Match Text Color */
    animation: pulseText 1.5s infinite;
}

@keyframes pulseText {
    0% { opacity: 0.6; }
    50% { opacity: 1.0; }
    100% { opacity: 0.6; }
}

/* Mentor specific close button */
.mentor-window-header .close-overlay {
    position: absolute;
    top: 14px;
    right: 14px;
    cursor: pointer;
    z-index: 10;
    width: 24px; /* Explicit width for image */
    height: 24px; /* Explicit height for image */
    transition: opacity 0.2s;
    opacity: 0.8;
}
.mentor-window-header .close-overlay:hover {
    opacity: 1.0;
}

/* Generic Close Overlay (Preserved for Deal Overlay) */
.close-overlay {
    /* Removed redundant generic absolute positioning to avoid conflicts if possible,
       but keeping for safety if Deal Overlay relies on it.
       However, Deal Overlay likely uses the float definition later in file.
       I will leave the generic block but override for Mentor Header above.
    */
    position: absolute;
    top: 10px;
    right: 15px;
    color: rgba(255,255,255,0.5);
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
    z-index: 10;
}
.close-overlay:hover {
    color: #fff;
}

.header-logo img {
    width: 188px;
    height: auto;
    margin-right: 0;
    position: relative;
    top: 3px; /* Align text baseline with nav items */
    transition: width 0.3s ease;
}

@media (max-width: 700px) {
    .header-logo img {
        width: 35px; /* Clip to show only 'A' symbol */
        height: 35px; /* Ensure aspect ratio or crop works */
        object-fit: cover;
        object-position: left;
    }

    .nav-icon {
        display: none;
    }

    .nav-item, .nav-link {
        font-size: 13px; /* Slightly reduced font size */
    }

    .nav-spacer, .nav-spacer-large {
        width: 10px; /* Reduced spacing */
    }

    .header-content-wrapper {
        padding: 0 10px;
    }
}

/* Styles for Gated/Restriction Status */
.spinner {
    border: 3px solid rgba(255, 255, 255, 0.3);
    border-top: 3px solid #3498db;
    border-radius: 50%;
    width: 18px;
    height: 18px;
    animation: spin 1s linear infinite;
    margin: auto;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.status-icon.checkmark {
    color: #2ecc71; /* Green color for checkmark */
    font-size: 1.5em;
    font-weight: bold;
    display: block;
    text-align: center;
}

.approval-link {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 56px;
    height: 32px;
    padding: 0;
    background-color: #e67e22; /* Default Orange */
    color: white;
    text-decoration: none;
    border-radius: 8px;
    font-size: 0.9em;
    font-weight: 700;
    box-sizing: border-box;
    line-height: 1;
}

.approval-link:hover {
    text-decoration: none;
    color: white;
    opacity: 0.9;
}

.btn-buy {
    background-color: #034106 !important;
    border: 2px solid #06610b;
}

.btn-gated {
    background-color: #8a3c04 !important;
    border: 2px solid #a54805;
}

.settings-form .large-textarea {
    min-height: 200px; /* Taller than a standard text field */
    font-family: 'Courier New', Courier, monospace;
    line-height: 1.5;
    width: 750px;
    height: 500px;
}

/* --- Deal Overlay Styles --- */
.deal-overlay {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.5);
}
.deal-overlay-content {
    background-color: #13161a;
    color: #ffffff;
    margin: 5% auto;
    padding: 40px;
    border: 1px solid #1f293c;
    width: 1000px; /* Updated Width */
    max-width: 95vw; /* Responsive constraint */
    border-radius: 20px; /* Updated radius to 20px */
    position: relative;
    box-shadow: 0 4px 15px rgba(0,0,0,0.5); /* Added box shadow */
    font-family: 'Open Sans', sans-serif;
}
.deal-overlay-content h1, .deal-overlay-content h2, .deal-overlay-content h3 {
    color: #ffffff;
}
.close-overlay {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}
.close-overlay:hover,
.close-overlay:focus {
    color: white;
    text-decoration: none;
    cursor: pointer;
}
.tab-nav {
    border-bottom: 1px solid #ccc;
    margin-bottom: 20px;
}
.tab-link {
    background: none;
    border: none;
    padding: 10px 15px;
    cursor: pointer;
    font-size: 16px;
    color: #ffffff; /* Explicitly set color for better visibility */
}
.tab-link.active {
    border-bottom: 2px solid #1976d2;
    color: #1976d2; /* Match active border color */
}
.tab-content {
    display: none;
}
.tab-content.active {
    display: block;
}
.grid-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
}
.grid-item span {
    font-weight: normal;
    color: #ccc;
}

/* Deals Dashboard Table Styles */
/* VERIFICATION: Sticky header alignment fix active - 2026-02-05 */
#deals-table {
    width: 100%;
    max-width: 1200px; /* User Req: Max 1200px */
    margin: 0 auto; /* Centered */
    font-family: 'Open Sans', sans-serif;
}

#deals-table table {
    border-spacing: 0; /* No structural spacing */
    border-collapse: separate; /* Use separate model for manual control */
    width: 100% !important; /* Force full width */
}

/* Spacer Row for Pill Effect */
.spacer-row td {
    height: 10px !important;
    line-height: 10px !important;
    font-size: 1px !important;
    background-color: transparent !important;
    padding: 0 !important;
    border: none !important;
    pointer-events: none;
}

#deals-table th, #deals-table td {
    padding: 0 8px !important; /* User Req: 8px padding */
    text-align: left;
    white-space: nowrap; /* Prevent wrapping on all columns */
    border: none; /* No default borders */
}

/* Special padding for first cell in row */
#deals-table th:first-child,
#deals-table td:first-child {
    padding-left: 8px !important; /* User Req: 8px padding */
}

/* Column Header Styles */
#deals-table th {
    background-color: transparent !important; /* Managed by pseudos */
    color: #a3aec0;
    font-family: 'Open Sans', sans-serif;
    font-weight: 600; /* SemiBold */
    font-size: 12px;
    cursor: default;
    height: 31px !important;
    min-height: 31px !important;
    max-height: 31px !important;
    vertical-align: middle !important;
    line-height: 1.2 !important;
    box-sizing: border-box !important;
    /* Sticky Positioning */
    position: sticky;
    top: calc(var(--filter-panel-height) + 190px); /* Adjusted: Flush with Group Header (134 + 56) */
    z-index: 180;
    transition: top 0.3s ease;
}

/* Pseudo-elements for Blocker and Visual Layers (Column Header) */
#deals-table .column-header-row th::before {
    content: '';
    position: absolute;
    inset: 0;
    background-color: #13161a; /* Blocker: Site Background */
    z-index: -2;
}

#deals-table .column-header-row th::after {
    content: '';
    position: absolute;
    inset: 0;
    background-color: #1f293c; /* Visual: Header Color */
    z-index: -1;
}

/* Rounded corners for Column Header Row (Applied to Visual Layer) */
#deals-table tr.column-header-row th:first-child::after {
    border-top-left-radius: 8px;
    border-bottom-left-radius: 8px;
}
#deals-table tr.column-header-row th:last-child::after {
    border-top-right-radius: 8px;
    border-bottom-right-radius: 8px;
}

/* Remove radius from the TH itself */
#deals-table tr.column-header-row th:first-child {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
}
#deals-table tr.column-header-row th:last-child {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}

#deals-table tr.column-header-row {
    height: 31px !important;
    min-height: 31px !important;
    max-height: 31px !important;
}

/* Group Separation Border */
#deals-table .group-end {
    border-right: 2px solid #13161a !important; /* User Req: 2px spacing */
}

/* Group Header Styles */
#deals-table .group-header th {
    background-color: transparent !important; /* Managed by pseudos */
    color: #ffffff;
    font-family: 'Open Sans', sans-serif;
    font-weight: 600; /* SemiBold */
    font-size: 14px;
    border: none !important; /* NONE */
    height: 56px !important;
    min-height: 56px !important;
    max-height: 56px !important;
    padding: 0 2px !important; /* User Req: Not the group headers (Keep 2px or 0?) */
    box-sizing: border-box !important;
    vertical-align: middle !important;
    line-height: 56px !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    /* Sticky Positioning */
    position: sticky;
    top: calc(var(--filter-panel-height) + 134px); /* Adjusted: Matches Filter Panel Bottom */
    z-index: 190;
    transition: top 0.3s ease;
}

/* Pseudo-elements for Blocker (Group Header) */
#deals-table .group-header th::before {
    content: '';
    position: absolute;
    inset: 0;
    background-color: #13161a; /* Blocker */
    z-index: -2;
}
#deals-table .group-header th::after {
    content: '';
    position: absolute;
    inset: 0;
    background-color: #13161a; /* Visual */
    z-index: -1;
}

/* Group Header special padding */
#deals-table .group-header th:first-child {
    padding-left: 4px !important;
}

#deals-table tr.group-header {
    background-color: #13161a !important;
    height: 56px !important;
    min-height: 56px !important;
    max-height: 56px !important;
}

/* Data Cell Styles */
#deals-table td {
    font-family: 'Open Sans', sans-serif;
    font-weight: 600; /* SemiBold */
    font-size: 12px;
    color: #a3aec0;
}

/* Specific Column Padding - High Specificity */
/* Override specific paddings if needed, but strict 8px requested */
#deals-table tr td.col-asin,
#deals-table tr td.col-sales-rank-current,
#deals-table tr td.col-1yr-avg,
#deals-table tr td.col-seller-quality-score,
#deals-table tr td.col-all-in-cost {
    padding-left: 8px !important; /* User Req: 8px */
}

/* Row Styles */
.deal-row {
    height: 47px; /* Adjusted target height */
    background-color: transparent; /* Transparent so cells control the background/radius */
}

.deal-row td {
    background-color: #283143; /* Normal Data Row Color applied to cells */
}

/* Rounded corners for Data Rows */
#deals-table .deal-row td:first-child {
    border-top-left-radius: 8px;
    border-bottom-left-radius: 8px;
}
#deals-table .deal-row td:last-child {
    border-top-right-radius: 8px;
    border-bottom-right-radius: 8px;
    padding-right: 2px !important; /* Ensure padding for button */
}


/* Hover Effects */
#deals-table .deal-row:hover td {
    background-color: #304163; /* Hover Data Row Color */
    color: #ffffff; /* Hover Font Color */
}

/* Sort Arrows Row Styles */
#deals-table .sort-arrows-row {
    height: 25px !important; /* Adjusted to 25px */
    max-height: 25px !important;
    min-height: 25px !important;
}

#deals-table .sort-arrows-row td {
    background-color: transparent !important; /* Managed by pseudos */
    height: 25px !important; /* Adjusted to 25px */
    min-height: 25px !important;
    max-height: 25px !important;
    padding: 0 8px !important; /* User Req: 8px */
    line-height: 25px !important; /* Adjusted */
    border: none !important; /* Ascending/Descending Row Border - NONE */
    /* Sticky Positioning */
    position: sticky;
    top: calc(var(--filter-panel-height) + 221px); /* Adjusted: Flush with Column Header (190 + 31) */
    z-index: 170;
    transition: top 0.3s ease;
    vertical-align: middle !important;
}

/* Pseudo-elements for Blocker (Sort Arrows) */
#deals-table .sort-arrows-row td::before {
    content: '';
    position: absolute;
    inset: 0;
    background-color: #13161a; /* Blocker */
    z-index: -2;
}
#deals-table .sort-arrows-row td::after {
    content: '';
    position: absolute;
    inset: 0;
    background-color: #13161a; /* Visual */
    z-index: -1;
}
#deals-table .sort-arrows-row td:first-child {
    padding-left: 8px !important; /* User Req: 8px */
}


.sort-arrows-container {
    display: flex;
    align-items: center;
    justify-content: flex-start; /* Left aligned */
    height: 25px;
}

.sort-arrow {
    width: 17px;
    height: 25px;
    cursor: pointer;
    margin-right: 0;
    padding: 0;
}

.buy-now-link {
    display: block;
    text-align: center;
    text-decoration: none;
    font-size: 1.2em;
    color: rgba(102, 153, 204, 0.8); 
    text-shadow: 0 0 2px rgba(102, 153, 204, 0.5);
}

.buy-now-link:hover, .best-price-link:hover {
    text-decoration: none;
}

.trust-suffix, .time-suffix {
    font-size: 90%;
    vertical-align: baseline;
    color: rgba(102, 153, 204, 0.9);
}

.pagination-controls {
    margin-top: 20px;
    text-align: center;
}
.pagination-controls button {
    padding: 8px 16px;
    margin: 0 5px;
}

/* Base style for truncated cells */
.title-cell, .seller-cell, .genre-cell, .season-detail-cell {
    overflow: hidden;
    text-overflow: ellipsis;
    position: relative; /* Needed for hover effect */
}

/* User Req: Width Updates */
.title-cell {
    width: 130px;
    max-width: 130px;
    min-width: 40px; /* Allow shrinking */
    overflow: hidden;
    text-overflow: ellipsis;
}

.season-detail-cell {
    width: 90px; /* User Req: Reduce default to 90px */
    max-width: 90px;
    min-width: 40px; /* Allow shrinking */
    overflow: hidden;
    text-overflow: ellipsis;
}

.col-condition {
    width: 82px;
    max-width: 82px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Center Drops */
.col-drops {
    text-align: center !important;
}


.seller-cell, .genre-cell {
    max-width: 120px;
}

/* Hover effect for truncated cells */
.title-cell:hover,
.seller-cell:hover,
.genre-cell:hover,
.season-detail-cell:hover {
    overflow: visible; /* Allow the inner span to overflow the cell bounds */
}

/* Style the inner span on hover */
.deal-row:hover .title-cell:hover span,
.deal-row:hover .seller-cell:hover span,
.deal-row:hover .genre-cell:hover span,
.deal-row:hover .season-detail-cell:hover span {
    position: relative; /* Ensure z-index is respected */
    background-color: #011b2a;
    z-index: 10;
    box-shadow: 0 2px 5px rgba(0,0,0,0.4);
    padding: 2px 5px; /* Add some padding for better appearance */
}

/* New Dashboard Layout Styles */
.dashboard-content-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center; /* Center the content horizontally */
    width: 100%;
    max-width: 1200px; /* User Req: Max 1200px */
    margin: 0 auto;
}

.deal-counter-container {
    width: 100%;
    max-width: 1200px; /* Match table width */
    text-align: left;
    margin-top: 10px; /* Reduced top margin to match bottom margin */
    margin-bottom: 10px;
    padding-left: 10px; /* Align with table padding */
}

#deal-counter {
    font-size: 16px; /* Match header font size */
    font-weight: bold; /* Match header font weight */
    color: #c5c5c5; /* Match header font color */
}

.table-container {
    width: 100%; /* Force container to fill width */
    max-width: 100%; /* Prevent overflow on small screens */
    /* overflow-x: auto; Removed to allow sticky headers to work relative to viewport */
}

/* New Filter Styles */
.filters-container {
    width: 100%;
    margin-bottom: 40px; /* Padding between filters and table */
    display: flex;
    justify-content: center; /* Center the filter form */
}

#filter-form {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    width: 100%;
    max-width: 1800px; /* Match a reasonable max table width */
    gap: 20px;
}

.filter-group-left {
    display: flex;
    align-items: flex-end;
    gap: 20px;
    flex-wrap: wrap;
}

.filter-item {
    display: flex;
    flex-direction: column;
}

.filter-item label {
    margin-bottom: 8px;
    font-size: 14px;
    height: 1.2em; /* Give label a fixed height */
    display: flex;
    align-items: flex-end; /* Align text to the bottom of the label box */
}

.filter-item .slider-container, .filter-item .styled-text-field {
    height: 30px; /* Ensure all input containers have same height */
    display: flex;
    align-items: center; /* Vertically center the slider/input within the container */
}

.filter-item label {
    margin-bottom: 8px;
    font-size: 14px;
}

.styled-text-field {
    width: 200px;
    height: 30px;
    padding: 0 10px;
    background-color: rgba(0, 0, 0, 0.2);
    color: white;
    border: 1px solid rgba(102, 153, 204, 0.5);
    border-radius: 5px;
    font-size: 1em;
    box-sizing: border-box;
}

.slider-container {
    width: 200px;
}

#sales-rank-value, #profit-margin-value, #profit-confidence-value, #seller-trust-value, #profit-value, #percent-down-value {
    /* Padding removed to fix spacing issue */
    padding-left: 0;
    color: rgba(102, 153, 204, 0.9);
}

.slider {
  -webkit-appearance: none;
  width: 100%;
  height: 8px;
  background: rgba(0, 0, 0, 0.3);
  outline: none;
  opacity: 0.7;
  transition: opacity .2s;
  border-radius: 4px;
  border: 1px solid rgba(102, 153, 204, 0.5);
}

.slider:hover {
  opacity: 1;
}

.slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  background: #336699;
  cursor: pointer;
  border-radius: 50%;
  border: 1px solid #003366;
}

.slider::-moz-range-thumb {
  width: 18px;
  height: 18px;
  background: #336699;
  cursor: pointer;
  border-radius: 50%;
  border: 1px solid #003366;
}

.filter-buttons {
    display: flex;
    flex-direction: column;
    gap: 8px;
    /* margin-left: auto; is no longer needed */
}

.filter-buttons button {
    padding: 6px 12px;
    font-size: 1em;
}

/* --- Video Background Styles --- */
#background-video {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    min-width: 100%;
    min-height: 100%;
    width: auto;
    height: auto;
    z-index: -2;
    object-fit: cover;
    opacity: 0.10;
}

/* Hide the original background image on home page to prefer video */
body.home-background::before {
    background-image: none !important;
}

@keyframes shine-slow {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

.main-header nav.main-nav a {
    display: inline-block;
    margin: 0 15px; /* 30px space */
}

/* --- Index Page Brand Styles --- */
.index-brand {
    position: absolute;
    top: 50px;
    left: 50px;
    display: flex;
    align-items: center;
}

.index-logo {
    height: 64px;
    margin-right: 26px; /* Moved closer */
}

.index-wordmark {
    font-family: 'Saira', sans-serif;
    font-weight: 400;
    text-transform: uppercase;
    background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0.6) 0%, /* Lighter color treatment */
        rgba(255, 255, 255, 0.6) 40%,
        rgba(255, 255, 255, 1.0) 50%,
        rgba(255, 255, 255, 0.6) 60%,
        rgba(255, 255, 255, 0.6) 100%
    );
    background-size: 200% 100%;
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
    animation: shine-slow 12s linear infinite;
    font-size: 45px; /* New size */
    line-height: 1;
    white-space: nowrap;
}
/* --- New Pagination Styles --- */
.pagination-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px; /* Space between buttons */
    margin-top: 25px;
    padding-bottom: 10px; /* Add some space at the bottom */
}

.page-btn {
    background-color: rgba(0, 0, 0, 0.2);
    color: #c5c5c5;
    border: 1px solid rgba(102, 153, 204, 0.5);
    padding: 8px 14px;
    font-size: 14px;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.2s ease, color 0.2s ease;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 40px; /* Ensure number buttons have a nice width */
    box-sizing: border-box;
}

.page-btn:hover:not(:disabled) {
    background-color: rgba(102, 153, 204, 0.2);
    color: #ffffff;
}

.page-btn.active {
    background-color: #336699;
    color: #ffffff;
    border-color: #336699;
    font-weight: bold;
}

.page-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.page-ellipsis {
    color: #c5c5c5;
    padding: 0 8px;
    font-size: 14px;
    display: inline-flex;
    align-items: center;
}

/* Navigation Styles - Active and Hover states */
.main-nav a.active {
    background-color: #566e9e;
    color: #ffffff;
    font-weight: 700;
    border-radius: 8px;
    padding: 0 20px;
    height: 38px;
    display: inline-flex;
    align-items: center;
    margin: 0 5px;
    text-decoration: none;
}

.main-nav a:hover {
    background-color: #304163;
    color: #ffffff;
    border-radius: 8px;
    padding: 0 20px;
    height: 38px;
    display: inline-flex;
    align-items: center;
    margin: 0 5px;
    text-decoration: none;
}

/* Adjust existing margin to prevent double spacing since we added padding/margin above */
.main-header nav.main-nav a {
    font-family: 'Open Sans', sans-serif;
    font-size: 15px;
    font-weight: 700; /* Bold */
    color: #ffffff;
    margin: 0 5px;
    padding: 0 20px;
    border-radius: 8px;
    height: 38px;
    display: inline-flex;
    align-items: center;
}

/* Binding Cell Styles */
.binding-cell {
    max-width: 95px; /* Requested width */
    overflow: hidden;
    text-overflow: ellipsis;
    position: relative;
}

/* Hover effect (identical to title-cell) */
.binding-cell:hover {
    overflow: visible;
}

.deal-row:hover .binding-cell:hover span {
    position: relative;
    background-color: #011b2a;
    z-index: 10;
    box-shadow: 0 2px 5px rgba(0,0,0,0.4);
    padding: 2px 5px;
    white-space: nowrap; /* Ensure full text doesn't wrap in the popout */
}

/* -------------------------------------------------------------------------- */
/* NEW STYLES FROM REFACTORING (Moving Inline to Global)                      */
/* -------------------------------------------------------------------------- */

/* Common Components */
.recalc-indicator {
    display: none;
    text-align: center;
    padding: 10px;
    background-color: rgba(25, 118, 210, 0.2);
    border: 1px solid #1976d2;
    border-radius: 5px;
    margin-bottom: 20px;
}

.deal-counter-wrapper {
    display: flex;
    align-items: center;
    gap: 15px;
}

.refresh-link {
    text-decoration: none;
    color: #1976d2;
    cursor: pointer;
    font-weight: bold;
    display: inline-flex;
    align-items: center;
    gap: 5px;
}

.refresh-icon {
    height: 24px;
    width: 24px;
    fill: currentColor;
}

.no-deals-message {
    text-align: center;
    padding: 20px;
}

/* Dashboard Generated HTML Classes */
.trend-falling-green { color: green; font-weight: bold; }
.trend-rising-red { color: red; font-weight: bold; }

.amzn-icon, .amz-warn-icon {
    width: 12px; /* User Req: Reduce size */
    height: 12px;
    display: block;
    vertical-align: middle; /* Adjusted for centering */
    margin-left: 5px;
}

.trend-icon {
    width: 10px; /* User Req: Reduce size */
    height: 10px;
    vertical-align: bottom;
    margin-right: 1px; /* User Req: Add 1px padding */
    display: inline-block;
    position: relative;
    top: -3px; /* User Req: Move up 3px */
}

.offers-wrapper {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    gap: 0; /* User Req: Remove gap */
}

.amz-warning-cell { font-size: 1.2em; text-align: center; }
.action-message {
    font-family: 'Open Sans', sans-serif;
    font-size: 10px; /* Reduced from 11px */
    margin-right: 10px;
    color: white;
    font-weight: 400 !important;
}
.action-strong-red { color: #ff4d4d; font-weight: 400 !important; }
.action-strong-white { color: white; font-weight: 400 !important; }
.view-amazon-btn { opacity: 0.7; }

/* Overlay Styles (Merged from Dashboard) */
.overlay-action-bar {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: 15px;
    margin-bottom: 15px;
    margin-top: -10px;
}

.overlay-buy-btn {
    background-color: transparent;
    color: white;
    border: 1px solid white;
    padding: 6px 20px;
    text-decoration: none;
    font-weight: bold;
    cursor: pointer;
    font-size: 0.9em;
    border-radius: 8px;
    transition: background-color 0.3s ease;
}
.overlay-buy-btn:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

.gated-status {
    font-weight: bold;
    display: flex;
    align-items: center;
    gap: 5px;
    color: white;
}

.ava-advice-container {
    border: 1px solid #000000;
    padding: 15px;
    margin-bottom: 20px;
    background-color: #283143;
    border-radius: 12px; /* Increased radius per request */
    clear: both; /* Ensure it sits below the close button */
    margin-top: 35px; /* Add space for the close button above */
}
.ava-advice-container h3 {
    margin-top: 0;
    font-family: 'Open Sans', sans-serif;
    font-size: 18px; /* Increased size +1px */
    font-weight: 400; /* Regular */
    margin-bottom: 5px;
    color: #eef2f6; /* Match Top Nav */
    opacity: 1.0; /* No transparency */
    text-align: left; /* Left align */
}
.ava-advice-container p {
    margin: 0;
    font-family: 'Open Sans', sans-serif;
    font-size: 14px; /* Increased size +1px */
    line-height: 1.4;
    color: #eef2f6; /* Match header color */
}

.yellow-action-btn {
    display: inline-block;
    padding: 6px 20px;
    background-color: #e67e22;
    color: white;
    text-decoration: none;
    border-radius: 4px;
    font-size: 1em;
    font-weight: bold;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s;
}
.yellow-action-btn:hover {
    background-color: #d35400;
    text-decoration: none;
    color: white;
}

.overlay-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
    font-size: 0.85em;
    background-color: transparent;
    border: none;
}

.grid-group {
    border: none;
    border-radius: 12px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.overlay-action-btn {
    height: 32px;
    border-radius: 8px;
    font-family: 'Open Sans', sans-serif;
    font-weight: 700;
    font-size: 12px;
    padding: 0 15px; /* Auto width */
    cursor: pointer;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    line-height: 1;
    color: white;
}
.overlay-action-btn:hover {
    color: white;
    text-decoration: none;
    opacity: 0.9;
}

.overlay-btn-buy {
    background-color: #034106;
    border: 2px solid #06610b;
}

.overlay-btn-apply {
    background-color: #8a3c04;
    border: 2px solid #a54805;
}

.overlay-group-header {
    background-color: #283143;
    font-family: 'Open Sans', sans-serif; /* Explicitly set font */
    font-weight: bold;
    padding: 0 10px;
    border: 1px solid #000000;
    margin-top: 0;
    color: #ffffff;
    height: 42px;
    display: flex;
    align-items: center;
    box-sizing: border-box;
}

.overlay-sub-header {
    background-color: #283143;
    font-weight: bold;
    padding: 0 10px;
    border: 1px solid #000000;
    margin-top: 0;
    color: #ffffff;
    height: 42px;
    display: flex;
    align-items: center;
    box-sizing: border-box;
}

.overlay-group-row {
    display: flex;
    justify-content: space-between;
    padding: 0 10px;
    border: none;
    align-items: center;
    height: 40px;
    background-color: #1e2227;
    box-sizing: border-box;
    position: relative; /* For tooltip positioning */
}
.overlay-group-row:last-child {
    border-bottom: none;
}

.overlay-group-row .label {
    font-family: 'Open Sans', sans-serif;
    font-weight: 700; /* Bold */
    font-size: 12px;
    color: #a3aec0; /* Grey */
}
.overlay-group-row .value {
    text-align: right;
    font-family: 'Open Sans', sans-serif;
    font-weight: 700; /* Bold */
    font-size: 12px;
    color: #ffffff; /* White */
}

.truncated {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 130px;
    display: inline-block;
    vertical-align: bottom;
    cursor: pointer; /* Added cursor pointer */
}

/* Hover effect for truncated text in overlay */
.deal-overlay-content .truncated:hover {
    position: absolute;
    right: 10px;
    background-color: #011b2a; /* Match Dashboard Hover */
    z-index: 100;
    box-shadow: 0 2px 5px rgba(0,0,0,0.4);
    padding: 2px 5px;
    width: auto;
    max-width: none;
    overflow: visible;
    border-radius: 4px;
}

.trend-up { color: #ff4d4d; font-weight: bold; }
.trend-down { color: #2ecc71; font-weight: bold; }
.trend-flat { color: #aaa; }


/* Deals / Settings Cards */
.settings-container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 40px 20px;
}

.settings-card {
    background-color: rgba(0, 0, 0, 0.2);
    padding: 25px;
    border-radius: 8px;
    margin-top: 2rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.settings-description {
    margin-bottom: 2rem;
    color: #ccc;
}

.card-no-margin { margin-top: 0; }
.card-warning { border-left: 5px solid #ffc107; }
.card-danger { border-color: #ff4d4d; }
.danger-text { color: #ff4d4d; }

.btn-warning-style { background-color: #ffc107; color: #333; }
.btn-info-style { background-color: #17a2b8; color: white; }
.btn-danger-style { background-color: #ff4d4d; color: white; }

.form-group-checkbox {
    display: flex;
    align-items: center;
    margin-bottom: 1rem;
}
.checkbox-margin { margin-right: 10px; }
.label-bold { margin-bottom: 0; font-weight: bold; }
.input-limit { max-width: 200px; }

/* Settings Form Grid */
.settings-form-grid {
    display: grid;
    grid-template-columns: auto; /* Single column for rows */
    gap: 15px; /* Space between setting rows */
    max-width: 500px; /* Or adjust as needed */
}
.setting-row {
    display: flex;
    align-items: center;
    gap: 10px; /* Space between elements in a row */
}
.setting-symbol {
    font-size: 1.2em;
    width: 20px; /* Fixed width for alignment */
    text-align: center;
}
.setting-input {
    width: 120px; /* Smaller width for the input boxes */
}
.setting-label {
    font-size: 1em;
    margin-bottom: 0; /* Override default label margins if any */
}
.tax-exempt-row {
    justify-content: flex-start; /* Align checkbox to the left */
    padding-left: 30px; /* Indent to align with input boxes */
}

/* Strategies Table */
.strategies-table { width: 100%; border-collapse: collapse; }
.strategies-header { background-color: #26567e; color: white; text-align: left; }
.strategies-header th { padding: 10px; border: 1px solid #ddd; }
.strategies-cell { padding: 10px; border: 1px solid #ddd; }

/* Guided Learning */
.learning-controls { display: flex; justify-content: space-between; align-items: center; }

/* Results */
.approve-btn-container { text-align: right; margin-top: 10px; }

/* Settings Page Specifics */
.settings-wrapper {
    max-width: 800px;
    margin: 0 auto;
}
.settings-page-intro {
    text-align: center;
    margin-bottom: 20px;
}
.card-header-flex {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}
.btn-edit {
    padding: 8px 16px;
}
/* Reusing btn-primary if exists or defining styles */
.btn-primary-custom {
    background-color: transparent; /* Default style */
    color: white;
    border: 1px solid white;
}
.btn-success-style {
    background-color: #28a745 !important;
    border-color: #28a745 !important;
    color: white !important;
}
.alert-success-custom {
    background-color: rgba(0, 255, 0, 0.1);
    border: 1px solid rgba(0, 255, 0, 0.2);
    color: white;
    padding: 15px;
    border-radius: 5px;
}
.hr-custom {
    border-top: 1px solid rgba(255,255,255,0.2);
}
.btn-outline-success-custom {
    border: 1px solid #28a745;
    color: #28a745;
    background: transparent;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
}
.text-muted-custom {
    display: block;
    margin-top: 0.5rem;
    color: #ccc;
}
.btn-connect-amazon {
    background-color: #ffc107;
    color: #333;
    padding: 10px 20px;
    text-decoration: none;
    border-radius: 5px;
    display: inline-block;
    margin-bottom: 20px;
}
.btn-secondary-custom {
    background-color: #6c757d;
    color: white;
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}
.settings-fieldset {
    border: none;
    padding: 0;
    margin: 0;
}
.form-group-mb {
    margin-bottom: 15px;
}
.label-block {
    display: block;
    margin-bottom: 5px;
}
.input-full-width {
    width: 100%;
}
.mb-0 { margin-bottom: 0; }
.card-margin-top { margin-top: 20px; }

/* -------------------------------------------------------------------------- */
/* NEW FILTER PANEL STYLES (Collapsible)                                      */
/* -------------------------------------------------------------------------- */

.filter-panel {
    width: 100%;
    max-width: 1200px; /* User Req: Max 1200px */
    background-color: transparent;
    border: 1px solid #000000;
    border-radius: 8px;
    margin: 0 auto; /* Centered horizontally */
    box-sizing: border-box;
    transition: height 0.3s ease;
    overflow: hidden;
    /* Sticky Positioning */
    position: sticky;
    top: 134px;
    z-index: var(--filter-panel-z);

     /* Approx 135px from top given header height ~120px */
    font-family: 'Open Sans', sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

.filter-panel::before {
    content: '';
    position: absolute;
    inset: 0;
    background-color: #13161a; /* Blocker: Site Background */
    z-index: -2; /* Bottom Layer */
    border-radius: 0; /* Square corners to block bleed-through */
}

.filter-panel::after {
    content: '';
    position: absolute;
    inset: 0;
    background-color: #1f293c; /* Visual: Panel Background */
    z-index: -1; /* Middle Layer */
    border-radius: 8px; /* Rounded Corners */
}

.filter-panel-closed {
    height: 43px;
}

.filter-panel-open {
    height: 102px;
}

/* Common Flex Layouts */
.panel-content-closed, .panel-content-open {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 100%;
    box-sizing: border-box;
}

.panel-content-closed {
    padding: 0 18px 0 18px;
}

.panel-content-open {
    padding: 0 23px 0 18px; /* 23px from right edge */
}

/* Hide content based on state */
.filter-panel-closed .panel-content-open {
    display: none;
}
.filter-panel-open .panel-content-closed {
    display: none;
}

/* Left Side: Icon & Text */
.panel-left {
    display: flex;
    align-items: center;
    height: 100%;
}

.filter-icon-toggle {
    width: 38px;
    height: 18px;
    cursor: pointer;
    margin-right: 0;
}

/* Open state padding adjustment */
.filter-panel-open .filter-icon-toggle {
    margin-right: 45px; /* Padding of 45px between the filter icon and the first slider */
}
.filter-panel-closed .filter-icon-toggle {
    margin-right: 16px; /* Padding of 16px between the filter icon and the text */
}

/* Closed State Text */
.deals-found-text {
    font-family: 'Open Sans', sans-serif;
    font-weight: 600; /* SemiBold */
    font-size: 15px;
    color: #ffffff;
    vertical-align: middle;
}

.panel-right {
    display: flex;
    align-items: center;
    gap: 18px; /* 18px separation */
}

.new-deals-text {
    font-family: 'Open Sans', sans-serif;
    font-weight: 600; /* SemiBold */
    font-size: 12px;
    color: #a3aec0;
}

.refresh-link-panel {
    display: flex;
    align-items: center;
    gap: 8px;
    text-decoration: none;
    color: #ffffff;
}

.refresh-link-panel:hover {
    text-decoration: none;
}

.refresh-link-panel img {
    width: 16px;
    height: 16px;
}

.refresh-text-white {
    font-family: 'Open Sans', sans-serif;
    font-weight: 600; /* SemiBold */
    font-size: 12px;
    color: #ffffff;
}

/* Open State Content */
.sliders-wrapper {
    display: flex;
    align-items: center;
    gap: 20px; /* Reduced to 20px */
    height: 100%;
    flex-wrap: wrap; /* Ensure filters wrap on smaller screens */
}

.filter-item {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start; /* Left aligned */
    margin: 0;
    padding: 0;
    height: 100%;
}

.filter-item label {
    font-family: 'Open Sans', sans-serif;
    font-weight: 600; /* SemiBold */
    font-size: 12px;
    color: #ffffff;
    white-space: nowrap;
    margin-bottom: 8px; /* Padding reduced to 8px per critique */
    height: auto;
    line-height: 1;
}

.slider-value-readout {
    font-family: 'Open Sans', sans-serif;
    font-weight: 600; /* SemiBold */
    color: #a3aec0 !important; /* Force color per critique */
    margin-left: 8px; /* Changed from 4px to 8px per request */
}

.slider-container-new {
    width: 120px; /* Shortened to 120px */
    height: 18px; /* Height to contain thumb */
    display: flex;
    align-items: center;
}

/* Custom Range Slider */
.custom-slider {
    -webkit-appearance: none;
    width: 120px; /* Shortened to 120px */
    height: 4px; /* Track Height */
    background: #304163; /* Track Color */
    border-radius: 5px; /* Assumed radius for track */
    outline: none;
    padding: 0;
    margin: 0;
    border: none;
}

.custom-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 13px; /* Thumb Size */
    height: 13px;
    border-radius: 50%; /* Rounded 50% */
    background: #566e9e; /* Thumb Color */
    border: none;
    /* 2px inner border using box-shadow per request */
    box-shadow: inset 0 0 0 2px #7397c2;
    cursor: pointer;
    margin-top: 0; /* Center on track? Default behavior usually centers. */
}

.custom-slider::-moz-range-thumb {
    width: 13px;
    height: 13px;
    border-radius: 50%;
    background: #566e9e;
    border: none;
    /* 2px inner border using box-shadow per request */
    box-shadow: inset 0 0 0 2px #7397c2;
    cursor: pointer;
}

/* Buttons */
.panel-right-buttons {
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 5px; /* 5px padding separating the two buttons */
    height: 100%;
}

.filter-btn {
    width: 56px;
    height: 32px;
    background-color: #566e9e;
    border: 2px solid #7397c2; /* 2px border */
    border-radius: 8px; /* Increased radius per critique */
    color: #ffffff;
    font-family: 'Open Sans', sans-serif;
    font-weight: 600; /* SemiBold */
    font-size: 12px;
    cursor: pointer;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    box-sizing: border-box;
}

.filter-btn:hover {
    opacity: 0.9;
}

.filter-icon-toggle {
    min-width: 38px;
    min-height: 18px;
    flex-shrink: 0;
}

/* Checkbox Styling */
.checkboxes-wrapper {
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 10px; /* Guessing gap based on mockup */
    margin-left: 20px; /* "Spacing between check boxes & sliders: 20px" */
    height: 100%;
}

.checkbox-item {
    display: flex;
    align-items: center;
    gap: 8px; /* Spacing between box and text */
}

.checkbox-item label {
    font-family: 'Open Sans', sans-serif;
    font-weight: 600; /* SemiBold */
    font-size: 12px;
    color: #ffffff;
    cursor: pointer;
    margin-bottom: 0; /* Override default label margin */
    line-height: 1; /* Align with checkbox */
}

.custom-checkbox {
    appearance: none;
    -webkit-appearance: none;
    width: 15px;
    height: 15px;
    background-color: #566e9e; /* Filled background always */
    border: 2px solid #7397c2;
    border-radius: 2px; /* Standard small radius */
    cursor: pointer;
    position: relative;
    margin: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

.custom-checkbox:checked {
    background-color: #566e9e; /* "Check Box Color: #566e9e" */
    /* Checkmark in white */
}

.custom-checkbox:checked::after {
    content: '';
    width: 5px;
    height: 10px;
    border: solid white;
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
    position: absolute;
    top: 1px;
}

/* Hover effect */
.custom-checkbox:hover {
    border-color: #a3aec0;
}

/* Sticky Header Shadow Line */
#sticky-header-shadow-line {
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    max-width: 1200px;
    height: 30px;
    background: linear-gradient(to bottom, rgba(0, 0, 0, 0.75) 0%, rgba(0, 0, 0, 0) 100%);
    top: calc(var(--filter-panel-height) + 246px); /* Adjusted: 221 + 25 */
    box-shadow: none;
    z-index: 180;
    pointer-events: none;
    transition: top 0.3s ease;
    display: none;
}

/* -------------------------------------------------------------------------- */
/* TIDY LAYOUT (NON-DASHBOARD PAGES)                                          */
/* -------------------------------------------------------------------------- */

/* Tidy Layout - Standardized Page Container */
.tidy-container {
    width: 100%;
    max-width: 950px;
    /* 135px from top means we need padding-top or margin-top on the container
       assuming the header is fixed/sticky.
       The main header is 134px height.
       So margin-top: 1px gives 135px.
    */
    margin: 1px auto 40px;
    padding: 40px;
    box-sizing: border-box;
}

/* Specific override for Settings page */
.tidy-container.settings-width {
    max-width: 750px;
}

/* Typography Standard */
.tidy-header,
.tidy-container h1,
.tidy-container h2,
.tidy-container h3,
.tidy-container h4,
.tidy-container h5 {
    font-family: 'Open Sans', sans-serif;
    font-weight: 700;
    font-size: 15px;
    color: #ffffff;
    margin-bottom: 20px;
    text-align: left;
    letter-spacing: normal;
    border-bottom: none;
    line-height: 1.4;
}

.tidy-text,
.tidy-container p,
.tidy-container label,
.tidy-container .setting-label,
.tidy-container .settings-description {
    font-family: 'Open Sans', sans-serif;
    font-weight: 700;
    font-size: 12px;
    color: #a3aec0;
    margin-bottom: 15px;
    line-height: 1.5;
}

/* Button Standard - Matches .filter-btn style but adaptable width */
.tidy-button,
.tidy-container button,
.tidy-container .btn-primary-custom,
.tidy-container .btn-edit,
.tidy-container .styled-button {
    background-color: #566e9e;
    border: 2px solid #7397c2;
    border-radius: 8px;
    color: #ffffff;
    font-family: 'Open Sans', sans-serif;
    font-weight: 700;
    font-size: 12px;
    padding: 0 16px;
    height: 32px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    text-decoration: none;
    transition: opacity 0.2s;
    width: auto;
    min-width: 56px;
    box-sizing: border-box;
    line-height: 1;
    margin: 0; /* Reset default margins */
}

.tidy-button:hover,
.tidy-container button:hover,
.tidy-container .styled-button:hover {
    opacity: 0.9;
    text-decoration: none;
    color: #ffffff;
    background-color: #566e9e; /* Keep standard color unless specific override */
}

/* Maintain semantic colors for Danger/Warning but keep the shape/font style */
.tidy-container .btn-danger-style {
    background-color: #d9534f;
    border-color: #d43f3a;
}
.tidy-container .btn-warning-style {
    background-color: #f0ad4e;
    border-color: #eea236;
    color: #ffffff;
}
.tidy-container .btn-info-style {
    background-color: #5bc0de;
    border-color: #46b8da;
}

/* Code Block Style */
.tidy-code-block,
.tidy-container textarea.large-textarea {
    background-color: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(102, 153, 204, 0.5);
    border-radius: 5px;
    padding: 15px;
    font-family: monospace;
    color: #ffffff;
    margin-bottom: 20px;
    white-space: pre-wrap;
    width: 100%;
    box-sizing: border-box;
}

/* Card / Section Style */
.tidy-card,
.tidy-container .settings-card {
    background-color: rgba(0, 0, 0, 0.2);
    padding: 25px;
    border-radius: 8px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    margin-bottom: 20px;
    margin-top: 0; /* Reset previous margin-top */
}

.tidy-container .settings-card.card-warning {
    border-left: 5px solid #ffc107;
}
.tidy-container .settings-card.card-danger {
    border-left: 5px solid #ff4d4d;
    border-color: #ff4d4d; /* Use full border color if previously specified */
}

/* Input Fields in Tidy Container */
.tidy-container input[type="text"],
.tidy-container input[type="number"],
.tidy-container .styled-text-field {
    background-color: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(102, 153, 204, 0.5);
    border-radius: 5px;
    color: #ffffff;
    padding: 5px 10px;
    height: 32px; /* Match button height usually */
    font-family: 'Open Sans', sans-serif;
    font-size: 12px;
}

/* -------------------------------------------------------------------------- */
/* DEAL DETAILS / MENTOR UPDATES                                              */
/* -------------------------------------------------------------------------- */
.mentor-icons-list {
    display: flex;
    gap: 8px;
}

.mentor-icon {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    cursor: pointer;
    transition: opacity 0.2s, transform 0.2s;
    object-fit: cover;
    opacity: 0.8;
    border: 2px solid transparent;
}
.mentor-icon:hover {
    transform: scale(1.1);
    border-color: white;
    opacity: 1.0;
}

.advice-header-wrapper {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px; /* Additional space below header */
    padding-bottom: 5px;
}
.advice-title-section {
    display: flex;
    align-items: center;
    gap: 10px;
}
.active-mentor-img {
    width: 77px;
    height: 77px;
    border-radius: 50%;
    object-fit: cover;
}
.mentor-selector-container {
    display: flex;
    align-items: center;
    gap: 10px;
}
.mentor-label {
    font-size: 12px;
    color: #a3aec0;
    font-weight: 700;
}

/* --- Responsive Dashboard Styles (Appended) --- */

/* 1. Fluid Narrowing & Breakpoints */
@media (max-width: 1200px) {
    #deals-table th, #deals-table td {
        /* User Req: Maintain 8px padding? "min 8px padding left and right INSIDE of all cells... no padding outside" */
        /* If I reduce to 2px here, I violate the requirement. I will keep it 8px. */
        /* padding: 0 2px; REMOVED reduction */
        font-size: 11px; /* Slightly smaller font */
    }
    /* Adjust Group Header height/font */
    #deals-table .group-header th {
        font-size: 13px;
        /* padding: 0 2px !important; Already set globally */
    }
}

/* 2. Hide ASIN (Reduced Threshold) & Disable Sticky Headers (Safety) */
@media (max-width: 700px) {
    .col-asin {
        display: none;
    }
}

/* Allow Filter Panel to grow naturally below 1024px */
@media (max-width: 1024px) {
    .filter-panel-open {
        height: auto !important;
        min-height: 102px;
        padding-bottom: 10px;
    }
}

/* 3. Truncate Title/Season (< 900px) */
/* REMOVED: Handled by fluid clamp() on .title-cell and .season-detail-cell */

/* 4. Hide Trust Columns (< 700px) - Synced with ASIN drop */
@media (max-width: 700px) {
    .col-seller-quality-score,
    .col-profit-confidence {
        display: none;
    }
}

@media (max-width: 768px) {
    /* Stack buttons in Filter Panel */
    .panel-right-buttons {
        flex-direction: row; /* Side by side on mobile? Or column? */
        margin-top: 10px;
    }
}
